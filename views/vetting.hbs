<h1>Vetting Home</h1>
<h3>All Applications by Status</h3>

<!-- Section that holds NEW documents -->
<div class="row">
    <div class="col-xs-12">
        <div role="tablist" aria-multiselectable="true">
            <div class="card">
                <div class="card-header" role="tab" id="headingOne">

                    <h5 class="mb-0">
                        <a data-toggle="collapse" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                            New Applications
                        </a>
                    </h5>

                </div>
                <div id="collapseOne" class="collapse in" role="tabpanel" aria-labelledby="headingOne">
                    <div class="card-block">
                        <table class="table table-sm table-bordered table-hover">
                            <thead>
                            <tr>
                                <th class="col-md-4">Name</th>
                                <th class="col-md-3">Last Edit</th>
                                <th class="col-md-3">Status</th>
                            </tr>
                            </thead>
                            <tbody>
                            {{#each new}}
                                <tr class="clickable-row" data-href="/view/{{_id}}">
                                    <td class="col-md-4"><a href="/view/{{_id}}">{{application.name.first}} {{application.name.last}}</a></td>
                                    <td class="col-md-3">{{updated}}</td>
                                    <td class="col-md-3"><span class="text-danger">{{status}}</span></td>
                                </tr>
                            {{/each}}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section that holds processing documents -->
        <!-- This is a grab bag for any application that is not NEW or DECLINED -->
        <div role="tablist" aria-multiselectable="true">
            <div class="card">
                <div class="card-header" role="tab" id="headingTwo">
                    <h5 class="mb-0">
                        <a data-toggle="collapse" href="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
                            Pending Applications
                        </a>
                    </h5>
                </div>
                <div id="collapseTwo" class="collapse in" role="tabpanel" aria-labelledby="headingTwo">
                    <div class="card-block">
                        <table class="table table-sm table-bordered table-hover">
                            <thead>
                            <tr>
                                <th class="col-md-4">Name</th>
                                <th class="col-md-3">Last Edit</th>
                                <th class="col-md-4">Status</th>
                            </tr>
                            </thead>
                            <tbody>
                            {{#each processing}}
                                <tr class="clickable-row" data-href="/view/{{_id}}">
                                    <td class="col-md-4"><a href="/view/{{_id}}">{{application.name.first}} {{application.name.last}}</a></td>
                                    <td class="col-md-3">{{updated}}</td>
                                    <td class="col-md-4"><span class="text-success">{{status}}</span></td>
                                </tr>
                            {{/each}}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section that holds declined documents -->
        <div role="tablist" aria-multiselectable="true">
            <div class="card">
                <div class="card-header" role="tab" id="headingThree">
                    <h5 class="mb-0">
                        <a data-toggle="collapse" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">
                            Declined/Withdrawn Applications
                        </a>
                    </h5>
                </div>
                <div id="collapseThree" class="collapse in" role="tabpanel" aria-labelledby="headingThree">
                    <div class="card-block">
                        <table class="table table-sm table-bordered table-hover">
                            <thead>
                            <tr>
                                <th class="col-md-4">Name</th>
                                <th class="col-md-3">Last Edit</th>
                                <th class="col-md-4">Status</th>
                            </tr>
                            </thead>
                            <tbody>
                            {{#each unapproved}}
                                <tr class="clickable-row" data-href="/view/{{_id}}">
                                    <td class="col-md-4"><a href="/view/{{_id}}">{{application.name.first}} {{application.name.last}}</a></td>
                                    <td class="col-md-3">{{updated}}</td>
                                    <td class="col-md-4"><span class="text-primary">{{status}}</span></td>
                                </tr>
                            {{/each}}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>


    </div>
</div>

<!-- Make entire table rows clickable! -->
<script>
    jQuery(document).ready(function($) {
        $(".clickable-row").click(function() {
            window.location = $(this).data("href");
        });
    });
</script>